'''
Created on 25/11/2014

@author: Juanito
'''

from PyQt4 import QtCore, QtGui
import interfazNuevaVentana
import psycopg2
import sys

from CinterfazSecundaria import interfazSecundaria

class interfazNuevaVentana(QtGui.QDialog, interfazNuevaVentana.Ui_Dialog):
    def __init__(self, parent=None):
        super(interfazNuevaVentana, self).__init__(parent)
        QtGui.QWidget.__init__(self)
        self.setupUi(self)
        self.connectActions()   
    
    def nuevoProyecto2(self):
        nueva=interfazSecundaria()
        nueva.exec_()
    
    def connectActions(self):
        self.buttonIniciar.clicked.connect(self.nuevoProyecto2)
        
        self.llenarComboCategoria()#declaro antes la funcion

    def llenarComboCategoria(self):

        con = psycopg2.connect(database='asocreto', user='postgres', password= 'dsa') 
        cur = con.cursor()
        cur.execute('SELECT nombrecategoria from categoria')          
        registro  = cur.fetchall()
        r1 = [row[0] for row in registro]
        cur.close()
        
        for i in range(len(r1)):
            self.comboBox.addItem(r1[i])
        
def main():
    app = QtGui.QApplication(sys.argv)
    ventana=interfazNuevaVentana()
    ventana.show()
    sys.exit(app.exec_())
if __name__=='__main__':
    main()